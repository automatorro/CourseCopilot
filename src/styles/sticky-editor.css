/* Sticky Header UX Improvements for CourseWorkspacePage */

/* Main container - Split Layout Fix */
.course-workspace-container {
  height: 100vh !important;
  overflow: hidden !important; /* Prevent body scroll */
}

/* Sidebar - Independent Scroll */
.course-workspace-container aside {
  height: 100% !important;
  overflow-y: auto !important;
  top: auto !important; /* Reset sticky top */
  position: relative !important;
  padding-bottom: 2rem !important;
}

/* Main Content - No scroll on wrapper, scroll inside */
.course-workspace-container > main {
  height: 100% !important;
  overflow: hidden !important;
  padding-bottom: 0 !important; /* Remove bottom padding to fit footer */
}

/* The white card container */
.course-workspace-container > main > div {
  height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important; /* Changed from visible */
}

/* New Scroll Container - FIXED MODE: No Scroll Here */
#main-scroll-container {
  flex: 1 !important;
  overflow: hidden !important; /* CHANGED: Hidden to prevent page scroll */
  position: relative !important;
  display: flex !important;
  flex-direction: column !important;
}

/* 
   Sticky Header Configuration - Zero Pixel Alignment 
   We enforce fixed heights to ensure perfect stacking of:
   1. Header (Title/Nav) -> Top 0
   2. Tabs (Editor/Preview) -> Top 64px
   3. Toolbar (TinyMCE) -> Top 112px
*/

/* 1. Header - Sticky at Top */
.editor-header-sticky {
  /* No longer sticky, just block because container doesn't scroll */
  position: relative !important;
  height: 64px !important; /* Enforced height for stacking calculation */
  z-index: 30 !important;
  background: white !important;
  border-bottom: 1px solid #e5e7eb !important;
  display: flex !important;
  align-items: center !important;
  flex-shrink: 0 !important;
}

.dark .editor-header-sticky {
  background: rgb(31 41 55) !important;
  border-color: rgb(55 65 81) !important;
}

/* 2. Tabs - Sticky below Header */
.editor-tabs-sticky {
  /* No longer sticky, just block */
  position: relative !important;
  height: 48px !important; /* Enforced height */
  z-index: 20 !important;
  background: white !important;
  box-shadow: none !important;
  flex-shrink: 0 !important;
}

.dark .editor-tabs-sticky {
  background: rgb(31 41 55) !important;
}

/* 3. Toolbar - NOW STATIC inside TinyMCE */
.tox .tox-editor-header {
  /* Reset sticky hacks */
  position: static !important; 
  top: auto !important;
  z-index: auto !important;
  width: auto !important;
  box-shadow: none !important;
  border-bottom: 1px solid #e5e7eb !important;
}

/* Fix: Ensure no gap between tabs and editor content */
.tox .tox-tinymce {
  border-top: none !important;
  margin-top: 0 !important;
  padding-top: 0 !important;
  overflow: hidden !important; /* Ensure internal scroll works */
  height: 100% !important; /* Force full height */
}

/* TinyMCE Sidebar/Edit Area - Allow internal scroll */
.tox .tox-sidebar-wrap {
    height: 100% !important;
    overflow: hidden !important;
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
}
.tox .tox-edit-area {
    flex: 1 !important;
    overflow: hidden !important; /* Iframe handles scroll */
}
.tox .tox-edit-area__iframe {
    height: 100% !important;
}

/* Sticky desktop action buttons - Now Static in Flex Layout */
.editor-actions-sticky {
  position: relative !important;
  bottom: auto !important;
  z-index: 100 !important;
  background: rgba(255, 255, 255, 0.95) !important;
  backdrop-filter: blur(8px) !important;
  box-shadow: 0 -4px 6px -1px rgb(0 0 0 / 0.1) !important;
  border-top: 1px solid #e5e7eb !important;
  flex-shrink: 0 !important;
}

.dark .editor-actions-sticky {
  background: rgba(31, 41, 55, 0.95) !important;
  border-color: rgb(55 65 81) !important;
}

/* Mobile action bar improvements */
.mobile-actions-sticky {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 50 !important;
  background: rgba(255, 255, 255, 0.95) !important;
  backdrop-filter: blur(8px) !important;
}

.dark .mobile-actions-sticky {
  background: rgba(31, 41, 55, 0.95) !important;
}

/* Remove padding from main content area to allow full scroll */
.editor-main-content {
  padding: 0 !important;
}

/* Ensure content area allows editor to grow */
.editor-content-scrollable {
  overflow-y: hidden !important; /* No scroll here, internal only */
  flex: 1 !important;
  height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
}

.dark .tox .tox-editor-header { 
  background: rgb(31 41 55) !important;
  border-bottom-color: #374151 !important;
}

/* Specific fix for TinyMCE 6+ structure to ensure no overflow clipping */
.tox-tinymce-aux {
    z-index: 9999 !important;
}

